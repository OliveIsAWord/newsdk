//
// Host-specific entrypoint for the TOWER compiler program.
//

#INCLUDE "<inc>/Frontend.twh"
#INCLUDE "<inc>/Runtime.twh"

TwrInputFileHandle : ^VOID
TwrOutputFileHandle : ^VOID

FN main (
    IN argc : _int,
    IN argv : ^_char[],
) : _int

    // Parse the arguments and identify the input and output files.

    TwrArgsParse ( argc, argv )

    // Open the input and output files.

    status := TwrOpenSource (
            &TwrInputFile, // filename
            &TwrInputFileHandle, // OUT handle
    )

    IF status THEN
        TwrUserError ( "Failed to open source file.", 0, 0, 0 )
    END

    status = TwrOpenDestination (
            &TwrOutputFile, // filename
            &TwrOutputFileHandle, // OUT handle
    )

    IF status THEN
        TwrUserError ( "Failed to open destination file.", 0, 0, 0 )
    END

    RETURN 0
END